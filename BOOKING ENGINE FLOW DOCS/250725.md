# Booking Engine Flow Documentation

This document outlines the full API flow and functional structure of the Booking Engine system, detailing every component involved in rendering the booking interface and completing a reservation.

---

## 1. API Call Sequence

The Booking Engine performs a sequence of API calls to gather all the required information to initiate and complete a hotel booking.

| Step | API Name                | Description                                                                |
| ---- | ----------------------- | -------------------------------------------------------------------------- |
| 1    | `get-hotel-info`        | Fetches core hotel data: room types, rate plans, room & hotel amenities.   |
| 2    | `auth`                  | Returns authenticated company-specific configuration and access control.   |
| 3    | `inventory-rate-fetch`  | Real-time fetch of inventory and rate based on selection and availability. |
| 4    | `hotels_by_company`     | Lists all hotels under the authenticated company (multi-property logic).   |
| 5    | `calendar-rate-fetch`   | Fetches 60-day rate snapshot for availability calendar display.            |
| 6    | `tax-details`           | Fetches applicable GST or service taxes as per room type and rate plan.    |
| 7    | `paid-services`         | Lists any extra/optional paid services available for guests.               |
| 8    | `deal-of-the-day`       | Compares property pricing vs. OTA pricing to display offer/value insights. |
| 9    | `add-on-charges`        | Retrieves conditional charges like early check-in, extra guests, etc.      |
| 10   | `get-be-plugin-details` | Provides configuration info related to the Booking Engine plugin.          |
| 11   | `be-notifications`      | Retrieves system-wide and hotel-specific notification content.             |

---

## 2. Guest Booking Flow

1. Guest lands on the booking engine page of a selected hotel.
2. The frontend loads and makes all the above API calls in sequence to populate:

   * Availability calendar
   * Room types and rate plans
   * Add-on services
   * Tax calculations
   * Deals & pricing comparisons
3. Guest selects:

   * Check-in and Check-out dates
   * Room and rate plan
   * Add-ons or paid services (if applicable)
4. The selected data is sent to the backend to verify real-time inventory and rate.
5. On proceeding to payment, the guest is shown multiple payment options.

---

## 3. Payment Options

During the booking process, guests can choose from one of the following payment methods:

| Payment Type      | Description                                                                 |
| ----------------- | --------------------------------------------------------------------------- |
| **Prepaid**       | Guest pays the full amount online at the time of booking.                   |
| **Partial**       | Guest pays a partial amount (e.g., advance) online, rest at the property.   |
| **Pay at Hotel**  | No online payment is collected; the guest pays the full amount at check-in. |
| **Bank Transfer** | Guest transfers the amount manually via bank                                |

> ðŸ“Œ Payment method availability may vary based on hotel configuration or rate plan rules.

---

## 4. Booking Confirmation & Post-Booking Process

* Upon successful payment or confirmation (based on payment method):

  * A **voucher** is generated.
  * The voucher is sent to both the **guest** and **hotelier** via email.

---

## 5. Guest Account Functionality

* When a guest books a room using a phone number, the system automatically registers the user.
* The user can log into the **My Account** section using OTP or credentials.
* After logging in, the guest can:

  * **View all their bookings**.
  * **Download voucher**.
  * **Modify bookings** (if allowed by policy).
  * **Cancel bookings** (based on cancellation rules).

---

## 6. Plugin Integration

* The Booking Engine runs as a plugin embedded within the hotelâ€™s website.
* Custom styling and tracking (e.g., GA4, FB Pixel) can be managed through `get-be-plugin-details` API.

---

## 7. Notes

* The booking engine supports multi-property listings under a single brand.
* Conditional logic based on rate plans and inventory rules applies dynamically.
* Guest behavior, tracking, and lead capture mechanisms are integrated optionally.

---

For any API or flow-level integration queries, please contact the Booking Engine development team.

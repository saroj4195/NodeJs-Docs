# Booking Engine Flow Documentation

## Overview

This document outlines the step-by-step flow, APIs involved, and key features of the BookingJini Booking Engine.

---

## Booking Engine API Flow

| Step | API Name                | Description                                                                |
| ---- | ----------------------- | -------------------------------------------------------------------------- |
| 1    | `get-hotel-info`        | Fetches core hotel data: room types, rate plans, room & hotel amenities.   |
| 2    | `auth`                  | Returns authenticated company-specific configuration and access control.   |
| 3    | `inventory-rate-fetch`  | Real-time fetch of inventory and rate based on selection and availability. |
| 4    | `hotels_by_company`     | Lists all hotels under the authenticated company (multi-property logic).   |
| 5    | `calendar-rate-fetch`   | Fetches 60-day rate snapshot for availability calendar display.            |
| 6    | `tax-details`           | Fetches applicable GST or service taxes as per room type and rate plan.    |
| 7    | `paid-services`         | Lists any extra/optional paid services available for guests.               |
| 8    | `deal-of-the-day`       | Compares property pricing vs. OTA pricing to display offer/value insights. |
| 9    | `add-on-charges`        | Retrieves conditional charges like early check-in, extra guests, etc.      |
| 10   | `get-be-plugin-details` | Provides configuration info related to the Booking Engine plugin.          |
| 11   | `be-notifications`      | Retrieves system-wide and hotel-specific notification content.             |

---

## Booking Flow Summary

1. **Hotel Info Load**: The booking engine begins by calling `get-hotel-info` to fetch all data about room types, rate plans, and amenities.
2. **Company Authentication**: The `auth` API fetches company-wide configurations.
3. **Multi-Property Logic**: `hotels_by_company` retrieves other hotels listed under the same company.
4. **Tax & Add-ons**: Calls for `tax-details`, `add-on-charges`, and `paid-services` are made to prepare for pricing calculations.
5. **Availability Calendar**: Rates for 60 days are pulled via `calendar-rate-fetch` to show availability.
6. **Deal Highlighting**: `deal-of-the-day` API compares internal prices vs. OTA prices to highlight the value.
7. **Inventory Check**: On selection of date/room, `inventory-rate-fetch` gets real-time room availability and prices.
8. **Plugin Data**: The plugin detail API (`get-be-plugin-details`) fetches Booking Engine-specific configurations.
9. **Notifications**: System and hotel notifications are fetched using `be-notifications` API.
10. **Nearby Info & Maps**: Display nearby places, and Google Maps are integrated for location assistance.
11. **Cancellation Policy**: Guests can view cancellation policy **without logging in**, during the booking process.

---

## Booking Confirmation

* Once a guest selects check-in/check-out dates, room, and meal plan, they proceed to booking.
* A booking voucher is generated and sent to both the **hotelier** and the **guest**.

---

## Payment Options

Guests can choose one of the following four payment methods:

| Payment Type      | Description                                                                |
| ----------------- | -------------------------------------------------------------------------- |
| **Prepaid**       | Guest pays the full amount online at the time of booking.                  |
| **Partial**       | Guest pays a partial amount online; the rest is paid at the property.      |
| **Pay at Hotel**  | Full payment is made at the hotel during check-in.                         |
| **Bank Transfer** | Guest transfers the amount via bank and uploads proof of payment manually. |

---

## User Registration & Account Handling

* When a guest books a room using their **phone number**, they are automatically registered.
* After booking, the guest can **log in** to the **My Account** section to:

  * View their bookings
  * Cancel or modify existing bookings
  * View voucher and booking details

---

## Additional Features

* **Nearby Places & Maps**: Integrated with Google Maps and nearby location data to help travelers.
* **Cancellation Policy**: Clearly displayed **before** booking. No login required.

---

## End-to-End Flow Summary

1. Guest visits Booking Engine page.
2. Initial hotel data is loaded.
3. User selects room, meal plan, and dates.
4. All applicable charges and deals are displayed.
5. Guest reviews cancellation policy, nearby areas, and maps.
6. Guest proceeds to booking and selects payment mode.
7. Confirmation voucher is sent to guest and hotelier.
8. Guest logs in to manage bookings if needed.

---


# Package & Experience Booking Engine Documentation

---

## Overview

This document explains the architecture, API flow, and functionality of two different booking modules integrated into the Booking Engine:

1. **Package Booking Engine**
2. **Experience Booking Engine**

These modules allow guests to book either multi-day packages or single-day experiences/events offered by the property or third-party vendors.

---

## Key Difference

| Feature             | Package Booking                          | Experience Booking                     |
| ------------------- | ---------------------------------------- | -------------------------------------- |
| Duration            | Multi-night or single-day                | Single-day only                        |
| Example Use Case    | 3N/4D honeymoon package, weekend retreat | Holi party, yoga class, swimming event |
| Includes Stay       | Yes                                      | No                                     |
| Meal/Activity Combo | Often bundled                            | Activity only                          |
| Inventory Based     | Yes                                      | Optional (based on headcount)          |

---

## 1. Package Booking Engine

### APIs & Flow

| Step | API Name                 | Description                                                                   |
| ---- | ------------------------ | ----------------------------------------------------------------------------- |
| 1    | `get-package-list`       | Fetches all available packages at a hotel.                                    |
| 2    | `get-package-details`    | Returns day-wise itinerary, pricing, and inclusions for the selected package. |
| 3    | `get-tax-details`        | Fetches GST or other applicable taxes for the selected package.               |
| 4    | `package-availability`   | Checks date-wise availability of the package.                                 |
| 5    | `create-package-booking` | Books the package for the guest.                                              |
| 6    | `voucher-generator`      | Sends booking voucher to guest and hotel.                                     |

### Features

* Shows day-wise itinerary and inclusions
* Displays comparison with OTA price (if applicable)
* Supports prepaid, partial, pay at hotel, and bank transfer payment methods
* Option to apply promo codes
* Guest is registered via phone number
* Guest can view/modify/cancel the booking via **My Account**

---

## 2. Experience Booking Engine

### APIs & Flow

| Step | API Name                    | Description                                                      |
| ---- | --------------------------- | ---------------------------------------------------------------- |
| 1    | `get-experience-list`       | Fetches all available experiences (e.g. pool party, yoga class). |
| 2    | `get-experience-details`    | Returns activity details, time slots, guest limits, pricing.     |
| 3    | `get-tax-details`           | Fetches applicable taxes for the experience.                     |
| 4    | `experience-availability`   | Checks date & time slot availability.                            |
| 5    | `create-experience-booking` | Books the experience.                                            |
| 6    | `voucher-generator`         | Sends booking confirmation to guest and hotel.                   |

### Features

* Ideal for single-day events
* May or may not include meal/snack option
* Payment options: prepaid, pay at hotel, bank transfer
* No stay included
* Registered via phone number
* Guest can access **My Account** for bookings

---

## Add-Ons

* **Cancellation Policy**: Visible during booking
* **Nearby Places & Map View**: Included for user context
* **Multilingual & Mobile Responsive**: UI optimized
* **Notifications**: Email/SMS confirmations
* **Plugin Integration**: For easy CMS embedding


# ğŸš€ DAY 8 - Express Routing, Middleware & POST Handling

---

## ğŸ”¥ Agenda

1. Separate Route Files
2. Express Middleware Basics
3. JSON Body Parsing with `express.json()`
4. Handling POST Requests
5. Practical Code Examples
6. Interview Prep Notes

---

## 1ï¸âƒ£ Modular Routing in Express

### ğŸ¤” Why?

- Keeps code clean & manageable
- Separates routes by feature

### ğŸ“ Folder Structure:

```
my-app/
â”œâ”€â”€ index.js
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ user.js
```

### ğŸ“ routes/user.js

```js
const express = require('express');
const router = express.Router();

router.get('/', (req, res) => {
  res.send('User Home');
});

router.get('/:id', (req, res) => {
  res.send(`User ID: ${req.params.id}`);
});

module.exports = router;
```

### ğŸ“ index.js

```js
const express = require('express');
const app = express();
const userRoutes = require('./routes/user');

app.use('/users', userRoutes);

app.listen(3000, () => console.log('Server started'));
```

**Try:**

- `/users`
- `/users/42`

---

## 2ï¸âƒ£ Express Middleware Basics

### âœ… Middleware = Function between Request and Response

```js
app.use((req, res, next) => {
  console.log(`${req.method} ${req.url}`);
  next();
});
```

### ğŸ” Types:

- Built-in (e.g., `express.json()`)
- Third-party (e.g., `cors`)
- Custom

---

## 3ï¸âƒ£ Parse JSON with `express.json()`

```js
app.use(express.json());
```

> Without it, `req.body` will be `undefined` for JSON POST data

---

## 4ï¸âƒ£ Handle POST Requests

### ğŸ“ index.js Example:

```js
app.post('/data', (req, res) => {
  const body = req.body;
  res.json({ received: body });
});
```

### âœ… Test it with Postman or cURL:

```bash
curl -X POST http://localhost:3000/data \
  -H "Content-Type: application/json" \
  -d '{"name": "Bhavik", "role": "developer"}'
```

Response:

```json
{
  "received": {
    "name": "Bhavik",
    "role": "developer"
  }
}
```

---

## 5ï¸âƒ£ Practice Tasks

âœ… Create `product.js` route:

- `/products/` -> "All products"
- `/products/:id` -> Show product ID
- `POST /products` -> Add new product from JSON

âœ… Add middleware to log time of request:

```js
app.use((req, res, next) => {
  console.log('Time:', new Date().toISOString());
  next();
});
```

---

## 6ï¸âƒ£ Interview Prep Notes

| Question                          | Answer                                      |
| --------------------------------- | ------------------------------------------- |
| What is middleware?               | Functions that run before response is sent. |
| How to create custom route files? | Use `express.Router()` in separate JS file. |
| How to parse JSON?                | `express.json()` middleware                 |
| How to handle POST requests?      | Use `app.post()` and `req.body`             |

---

# âœ… Day 8 Complete!

Youâ€™ve learned:

- Modular routing
- Middleware usage
- POST + JSON handling

---

Next up â€” **Day 9**:

> ğŸ”œ Path Params vs Query Params\
> ğŸ”œ CRUD with Express Router ğŸ”œ Status Codes

Let me know when you're ready for Day 9!


